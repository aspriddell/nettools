@typeparam TItem
@typeparam TOut

<div class="d-flex flex-column">
    @if (UploadedFileFailed)
    {
        <HxAlert Color="ThemeColor.Warning">
            <div class="d-flex align-items-center gap-3">
                <HxIcon Icon="@BootstrapIcon.StopCircle"/>
                <span>The uploaded file (@CurrentFileName) could not be processed. Please try another file or try again later.</span>
            </div>
        </HxAlert>
    }
    else if (Current != null && FileProcessing == null)
    {
        <HxAlert Color="ThemeColor.Success">
            <div class="d-flex align-items-center gap-3">
                <HxIcon Icon="@BootstrapIcon.CheckCircleFill"/>
                <span><strong>@CurrentFileName</strong> loaded</span>

                <div class="flex-grow-1"></div>
                <HxButton Color="ThemeColor.Link" CssClass="text-decoration-none" OnClick="() => ShowUploadDialog = !ShowUploadDialog">Toggle Upload Dialog</HxButton>
            </div>
        </HxAlert>
    }
    else if (FileProcessing != null && !UploadedFileFailed)
    {
        <HxAlert Color="ThemeColor.Info">
            <div class="d-flex align-items-center gap-3">
                <HxIcon Icon="@BootstrapIcon.InfoCircleFill"/>
                <span>Processing File...</span>

                @if (FileProcessing?.IsCancellationRequested == false)
                {
                    <div class="flex-grow-1"></div>
                    <HxButton Color="ThemeColor.Link" OnClick="() => FileProcessing.Cancel()">Cancel</HxButton>
                }
            </div>
        </HxAlert>
    }

    @if (Current == null && FileProcessing == null || ShowUploadDialog || UploadedFileFailed)
    {
        <HxInputFileDropZone Accept="application/zip,application/json" OnChange="FileSubmitted" CssClass="mb-3"/>
    }
</div>